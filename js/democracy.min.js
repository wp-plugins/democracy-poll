jQuery(document).ready(function(t){"use strict";var e,i=function(){var t=this.is("input"),n=t?this.val():this.text();"..."==n.substring(n.length-3)?t?this.val(n.substring(0,n.length-3)):this.text(n.substring(0,n.length-3)):t?this[0].value+=".":this[0].innerHTML+=".",e=setTimeout(i.bind(this),200)},n=".democracy",s=".dem-results",a=".dem-add-answer-txt";t.fn.demAddAnswer=function(){var e=this,i=e.closest(s),n=i.find("[type=checkbox]").length>0,c=t('<input type="text" class="'+a.replace(/\./,"")+'" value="">');if(i.find("[type=radio]").each(function(){t(this).click(function(){e.fadeIn(300),t(a).remove()}),"radio"==t(this)[0].type&&(this.checked=!1)}),e.hide().parent("li").append(c),c.hide().fadeIn(300).focus(),n){var d=i.find(a);t('<span class="add-answer-txt-close">Ã—</span>').insertBefore(d).css("line-height",d.outerHeight()+"px").click(function(){var e=t(this).parent("li");e.find("input").remove(),e.find("a").fadeIn(300),t(this).remove()})}return!1},t.fn.demCollectAnsw=function(){var e=this.closest("form"),i=e.find("[type=checkbox],[type=radio],[type=text]"),n=e.find(a).val(),s=[],c=i.filter("[type=checkbox]:checked");if(c.length>0)c.each(function(){s.push(t(this).val())});else{var d=i.filter("[type=radio]:checked");d.length&&s.push(d.val())}return n&&s.push(n),s=s.join(","),s?s:""},t.fn.demDoAction=function(a){var c=this,d=c.closest(n),o=d.attr("data-ajax-url"),h={dem_pid:d.attr("data-pid"),dem_act:a,action:"dem_ajax"};return"undefined"==typeof h.dem_pid?(console.log("Poll id is not defined!"),!1):("vote"==a&&(h.answer_ids=c.demCollectAnsw()),"delVoted"!=a||confirm(c.attr("data-confirm-text"))?"newAnswer"==a?(c.demAddAnswer(),!1):(e=setTimeout(i.bind(c),50),t.post(o,h,function(e){var i=300,n=c.closest(s),a=n.clone().html(e).css({height:"auto"}).appendTo(n),d="border-box"==n.css("box-sizing")?a.outerHeight():a.height();n.css({opacity:0}).html(e).animate({height:d},i,function(){t(this).animate({opacity:1},1.5*i)}),n.demSetClick()}),!1):!1)},t.fn.demSetClick=function(){var e="data-dem-act";this.find("["+e+"]").each(function(){t(this).attr("href","#")}).click(function(i){i.preventDefault(),t(this).blur().demDoAction(t(this).attr(e))})},t(document).demSetClick(),t(s).each(function(){t(this).height(t(this).height())})});